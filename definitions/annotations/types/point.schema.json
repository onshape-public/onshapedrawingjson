{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://drawing-schemas.onshape.com/annotations/types/point",
    "title": "Referenced Point",
    "type": "object",
    "$comment": "Points reference a distinct point in different coordinate systems and can be both associative and nonassociative. When a reference view is specified for a coordinate, the view coordinate system is applied. View coordinates are assumed to be model coordinates in meters, as we see in the view DWG/JSON files. Z coordinates may be important for associativity. Z coordinates should be 0 for non-associative points.",
    "properties": {
        "type": {
            "type": "string",
            "const": "Onshape::Reference::Point"
        },
        "snapPointType": {
            "type": "string",
			"enum":["ModeNear", "ModeStart", "ModeEnd", "ModeCenter", "ModeMid", "ModeQuad", "ModeIntersec", "ModeIns", "ModePerp", "ModeTan", "ModeApint", "ModePar", "ModeNode"]
        }
    },
    "required": [
        "type"
    ],
    "oneOf": [
        {
            "title": "Nonassociative point",
            "$comment":"Coordinate of the indicated point in X,  Y, Z format",
            "properties": {
                "coordinate": {
                    "title": "Coordinate",
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3
                },
                "viewId": {
                    "description":"If specified, the specified coordinates are inferred to be in the coordinate space of the view specified in viewId. If no viewId is specified, coordinates are in sheet space.",
                    "type": "string"
                }
            },
            "required": [
                "coordinate"
            ]
        },
        {
            "title": "Associative point based on unique id",
            "properties": {
                "coordinate": {
                    "title": "Coordinate",
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3
                },
                "uniqueId": {
                    "description":"Hexadecimal handle of an edge inside a view, e.g. \"F4242\"",
                    "type": "string"
                },
                "viewId": {
                    "type": "string"
                },
                "anchorType": {
                    "type": "string",
                    "enum":[
                        "min",
                        "max"
                    ]
                },
                "quadPointType": {
                    "description":"Type of quad point of Circle",
                    "type": "string",
                    "enum": ["left", "right", "top", "bottom"]
                }
            },
            "required": [
                "uniqueId", "viewId", "coordinate"
            ]
        },
        {
            "title": "Associative point based on deterministic id",
            "properties": {
                "coordinate": {
                    "title": "Coordinate",
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3
                },
                "deterministicId": {
                    "description":"DeterministicId of an edge inside a view, e.g. \"KHSk-.s2\"",
                    "type": "string"
                },
                "viewId": {
                    "type": "string"
                },
                "anchorType": {
                    "type": "string",
                    "enum":[
                        "min",
                        "max"
                    ]
                },
                "quadPointType": {
                    "description":"Type of quad point of Circle",
                    "type": "string",
                    "enum": ["left", "right", "top", "bottom"]
                }
            },
            "required": [
                "deterministicId", "viewId", "coordinate"
            ]
        },
        {
            "title": "Associative point based on logical id",
            "properties": {
                "coordinate": {
                    "title": "Coordinate",
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3
                },
                "logicalId": {
                    "description":"LogicalId of some other annotation e.g. \"Centerline1\"",
                    "type": "string"
                },
                "anchorType": {
                    "type": "string",
                    "enum":[
                        "min",
                        "max"
                    ]
                },
                "centerMarkGripPointType": {
                    "description":"Type of grip point of Centermark",
                    "type": "string",
                    "enum": ["none","left", "right", "top", "bottom"]
                },
                "quadPointType": {
                    "description":"Type of quad point of Circle",
                    "type": "string",
                    "enum": ["left", "right", "top", "bottom"]
                }
            },
            "required": [
                "logicalId", "coordinate"
            ]
        },
        {
            "title": "Intersection point based on deterministic when snapPointType is ModeIntersec",
            "$comment":"Coordinate of the indicated point in X,  Y, Z format",
            "properties": {
                "coordinate": {
                    "title": "Coordinate",
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3
                },
                "deterministicIdIntersectedEdge1": {
                    "description":"DeterministicId of intersected edge inside a view.",
                    "type": "string"
                },
                "deterministicIdIntersectedEdge2": {
                    "description":"DeterministicId of intersected edge inside a view.",
                    "type": "string"
                },
                "viewId": {
                    "type": "string"
                }
            },
            "required": [
                "coordinate", "deterministicIdIntersectedEdge1", "deterministicIdIntersectedEdge2", "viewId"
            ]
        },
        {
            "title": "Intersection point based on deterministic when snapPointType is ModeIntersec",
            "$comment":"Intersection pointin X, Y, Z format",
            "properties": {
                "coordinate": {
                    "title": "Coordinate",
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 3,
                    "maxItems": 3
                },
                "uniqueIdIntersectedEdge1": {
                    "description":"Hexadecimal handle of intersected edge inside a view.",
                    "type": "string"
                },
                "uniqueIdIntersectedEdge2": {
                    "description":"Hexadecimal handle of intersected edge inside a view.",
                    "type": "string"
                },
                "viewId": {
                    "type": "string"
                }
            },
            "required": [
                "coordinate", "uniqueIdIntersectedEdge1", "uniqueIdIntersectedEdge2", "viewId"
            ]
        }
    ]
}
